language: c
before_install:
  - sudo apt-get install -yy gcc-arm-linux-gnueabihf
script:
  - wget https://cdn.kernel.org/pub/linux/kernel/v4.x/linux-4.19.1.tar.xz
  - tar -xf linux-4.19.1.tar.xz
  - pushd linux-*
  - patch -p1 <../linux/4.19.1/sfpi-linux-4.19.1.patch
  - make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- saltedfishpi_defconfig
  - make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j4
  - popd
  - wget 'https://github.com/u-boot/u-boot/archive/v2018.11.tar.gz'
  - tar -xf v2018.11.tar.gz
  - pushd u-boot-*
  - cp ../u-boot/v2018.11-rc3/.config .
  - make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- -j4
  - popd
addons:
  apt:
    update: true
